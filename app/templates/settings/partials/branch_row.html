<tr id="branch-row-{{ branch.id }}" class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
        {{ branch.name }}
        {% if branch.is_default %}
            <span class="bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300">Default</span>
        {% endif %}
    </td>
    <td class="px-6 py-4">
        {{ branch.currency }}
    </td>
    <td class="px-6 py-4 text-right space-x-4">
        <button 
            hx-get="/settings/branches/{{ branch.id }}/edit"
            hx-target="#branch-row-{{ branch.id }}"
            hx-swap="outerHTML"
            class="font-medium text-blue-600 dark:text-blue-500 hover:underline">
            Edit
        </button>
        
        {# THE FIX: Add the Delete button, but only if it's not the default branch #}
        {% if not branch.is_default %}
        <button
            hx-delete="/settings/branches/{{ branch.id }}"
            hx-target="closest tr"
            hx-swap="outerHTML"
            hx-confirm="DANGER: Are you absolutely sure you want to delete the '{{ branch.name }}' branch? This will permanently delete all customers, products, invoices, and financial records associated with it. This action cannot be undone."
            class="font-medium text-red-600 dark:text-red-500 hover:underline">
            Delete
        </button>
        {% endif %}
    </td>
</tr>
