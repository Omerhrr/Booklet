{# app/templates/onboarding/signup.html #}
{% extends "_shared/base.html" %}

{% block content %}
<section class="bg-bg-base">
    <div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0">
        <a href="/" class="flex items-center mb-6 text-2xl font-semibold text-text-base">
            <img class="w-8 h-8 mr-2" src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/logo.svg" alt="logo">
            Booklet
        </a>
        <div class="w-full bg-bg-surface rounded-lg shadow border border-border-base md:mt-0 sm:max-w-xl">
            <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
                <h1 class="text-xl font-bold leading-tight tracking-tight text-text-base md:text-2xl">
                    Create Your Account (<span class="capitalize text-primary-500">{{ plan }}</span> Plan )
                </h1>
                
                {# THE FIX: Removed hx-encoding="multipart/form-data" #}
                <form class="space-y-4 md:space-y-6" 
                      hx-post="/create-business"
                      hx-target="#form-container"
                      hx-swap="outerHTML">
                    
                    <div id="form-container">
                        <input type="hidden" name="plan" value="{{ plan }}">

                        <!-- User Account Fields -->
                        <h2 class="text-lg font-semibold border-b border-border-base pb-2 text-text-base">Your Details</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <label for="username" class="block mb-2 text-sm font-medium text-text-base">Username</label>
                                <input type="text" name="username" class="bg-bg-muted border border-border-muted text-text-base sm:text-sm rounded-lg block w-full p-2.5" required>
                            </div>
                            <div>
                                <label for="email" class="block mb-2 text-sm font-medium text-text-base">Email</label>
                                <input type="email" name="email" class="bg-bg-muted border border-border-muted text-text-base sm:text-sm rounded-lg block w-full p-2.5" required>
                            </div>
                            <div class="md:col-span-2">
                                <label for="password" class="block mb-2 text-sm font-medium text-text-base">Password</label>
                                <input type="password" name="password" class="bg-bg-muted border border-border-muted text-text-base sm:text-sm rounded-lg block w-full p-2.5" required>
                            </div>
                        </div>

                        <!-- Business Fields -->
                        <h2 class="text-lg font-semibold border-b border-border-base pb-2 pt-6 text-text-base">Business Details</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                            <div class="md:col-span-3">
                                <label for="business_name" class="block mb-2 text-sm font-medium text-text-base">Business Name</label>
                                <input type="text" name="business_name" class="bg-bg-muted border border-border-muted text-text-base sm:text-sm rounded-lg block w-full p-2.5" required>
                            </div>
                            <div>
                                <label for="country" class="block mb-2 text-sm font-medium text-text-base">Country</label>
                                <input type="text" name="country" value="Nigeria" class="bg-bg-muted border border-border-muted text-text-base sm:text-sm rounded-lg block w-full p-2.5" required>
                            </div>
                            <div>
                                <label for="currency" class="block mb-2 text-sm font-medium text-text-base">Currency</label>
                                <input type="text" name="currency" value="NGN" class="bg-bg-muted border border-border-muted text-text-base sm:text-sm rounded-lg block w-full p-2.5" required>
                            </div>
                        </div>
                        
                        <div id="error-message-container" class="mt-4"></div>

                        <button type="submit" class="w-full mt-6 text-text-inverted bg-primary-600 hover:bg-primary-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Create Account</button>
                        
                        <p class="text-sm font-light text-text-muted mt-4">
                            Already have an account? <a href="/login" class="font-medium text-primary-500 hover:underline">Login here</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}
